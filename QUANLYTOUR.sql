CREATE DATABASE QUANLYTOUR
GO
USE QUANLYTOUR
GO

-- Tạo các bảng
-- 1. KHACHHANG
CREATE TABLE KHACHHANG(
    MAKH VARCHAR(10) PRIMARY KEY,
    TenKH NVARCHAR(50),
    DiaChi NVARCHAR(100),
    SDT VARCHAR(15)
);

-- 2. HOPDONG
CREATE TABLE HOPDONG (
    SoHD VARCHAR(10) PRIMARY KEY,
    NgayKy DATE,
    TongSoNguoi INT,
    NgayGioKhoiHanh DATETIME,
    NgayGioVe DATETIME,
    SoTreEm INT,
    TongChiPhi DECIMAL(10, 2),
    MAKH VARCHAR(10),
    FOREIGN KEY (MAKH) REFERENCES KHACHHANG(MAKH)
);

-- 3. BUAAN
CREATE TABLE BUAAN (
    MABA VARCHAR(10) PRIMARY KEY,
    LoaiBuaAn NVARCHAR(50),
    SoKhauPhan INT,
    LoaiDonGia NVARCHAR(50),
    DonGia DECIMAL(10, 2),
    SoHD VARCHAR(10),
    FOREIGN KEY (SoHD) REFERENCES HOPDONG(SoHD)
);

-- 4. KHACHSAN
CREATE TABLE KHACHSAN (
    MAKS VARCHAR(10) PRIMARY KEY,
    TenKS NVARCHAR(50),
    LoaiKS NVARCHAR(50),
    SoPhongDon INT,
    SoPhongDoi INT
);

-- 5. THANHPHO
CREATE TABLE THANHPHO (
    MATP VARCHAR(10) PRIMARY KEY,
    TenTP NVARCHAR(50),
    TGianOLai INT,
    CoGheLai BIT
);

-- 6. DIEMTHAMQUAN
CREATE TABLE DIEMTHAMQUAN (
    MADTQ VARCHAR(10) PRIMARY KEY,
    TenDTQ NVARCHAR(50),
    TGianDungChan INT,
    DonGiaNguoiLon DECIMAL(10, 2)
);

-- 7. LICHTRINH
CREATE TABLE LICHTRINH (
    MALT VARCHAR(10) PRIMARY KEY,
    NgayGioDen DATETIME,
    NgayGioDi DATETIME,
    ThuTuDiemDen INT,
    MAKS VARCHAR(10),
    MATP VARCHAR(10),
    MADTQ VARCHAR(10),
    SoHD VARCHAR(10),
    FOREIGN KEY (MAKS) REFERENCES KHACHSAN(MAKS),
    FOREIGN KEY (MATP) REFERENCES THANHPHO(MATP),
    FOREIGN KEY (MADTQ) REFERENCES DIEMTHAMQUAN(MADTQ),
    FOREIGN KEY (SoHD) REFERENCES HOPDONG(SoHD)
);

-- 8. PHUONGTIEN
CREATE TABLE PHUONGTIEN (
    MAPT VARCHAR(10) PRIMARY KEY,
    TenPT NVARCHAR(50)
);

-- 9. LOAIXEHOI
CREATE TABLE LOAIXEHOI (
    MALX VARCHAR(10) PRIMARY KEY,
    TenLX NVARCHAR(50),
    SoChoNgoi INT,
    CoMayLanh BIT,
    MAPT VARCHAR(10),
    FOREIGN KEY (MAPT) REFERENCES PHUONGTIEN(MAPT)
);

-- 10. HANGVEMAYBAY
CREATE TABLE HANGVEMAYBAY (
    MAHVB VARCHAR(10) PRIMARY KEY,
    TenHangVe NVARCHAR(50),
    DonGiaNguoiLon DECIMAL(10, 2),
    DonGiaTreEm DECIMAL(10, 2),
    MAPT VARCHAR(10),
    FOREIGN KEY (MAPT) REFERENCES PHUONGTIEN(MAPT)
);

-- 11. HANGVEXELUA
CREATE TABLE HANGVEXELUA (
    MAHX VARCHAR(10) PRIMARY KEY,
    TenHangVe NVARCHAR(50),
    DonGiaTuyenDuong DECIMAL(10, 2),
    GiamGiaTreEm DECIMAL(10, 2),
    TinhTheoDauNguoi BIT,
    MAPT VARCHAR(10),
    FOREIGN KEY (MAPT) REFERENCES PHUONGTIEN(MAPT)
);

-- Nhập dữ liệu mẫu (ít nhất 5 bản ghi mỗi bảng)

-- 1. KHACHHANG
INSERT INTO KHACHHANG VALUES
('KH01', N'Nguyễn Văn A', N'Hà Nội', '0901234567'),
('KH02', N'Trần Thị B', N'Hải Phòng', '0901234568'),
('KH03', N'Lê Văn C', N'Đà Nẵng', '0901234569'),
('KH04', N'Phạm Thị D', N'Hồ Chí Minh', '0901234570'),
('KH05', N'Hoàng Văn E', N'Cần Thơ', '0901234571');

-- 2. HOPDONG
INSERT INTO HOPDONG VALUES
('HD01', '2025-05-01', 10, '2025-05-10 08:00', '2025-05-15 18:00', 2, 5000000.00, 'KH01'),
('HD02', '2025-05-02', 15, '2025-05-11 09:00', '2025-05-16 19:00', 3, 7500000.00, 'KH02'),
('HD03', '2025-05-03', 8, '2025-05-12 07:00', '2025-05-17 17:00', 1, 4000000.00, 'KH03'),
('HD04', '2025-05-04', 12, '2025-05-13 08:30', '2025-05-18 18:30', 2, 6000000.00, 'KH04'),
('HD05', '2025-05-05', 20, '2025-05-14 09:00', '2025-05-19 19:00', 4, 10000000.00, 'KH05');

-- 3. BUAAN
INSERT INTO BUAAN VALUES
('BA01', N'Bữa Sáng', 10, N'Đơn Giá Cố Định', 50000.00, 'HD01'),
('BA02', N'Bữa Trưa', 15, N'Đơn Giá Cố Định', 75000.00, 'HD02'),
('BA03', N'Bữa Tối', 8, N'Đơn Giá Cố Định', 60000.00, 'HD03'),
('BA04', N'Bữa Sáng', 12, N'Đơn Giá Cố Định', 45000.00, 'HD04'),
('BA05', N'Bữa Trưa', 20, N'Đơn Giá Cố Định', 80000.00, 'HD05');

-- 4. KHACHSAN
INSERT INTO KHACHSAN VALUES
('KS01', N'Khách Sạn A', N'3 Sao', 10, 5),
('KS02', N'Khách Sạn B', N'4 Sao', 15, 8),
('KS03', N'Khách Sạn C', N'5 Sao', 20, 10),
('KS04', N'Khách Sạn D', N'3 Sao', 12, 6),
('KS05', N'Khách Sạn E', N'4 Sao', 18, 9);

-- 5. THANHPHO
INSERT INTO THANHPHO VALUES
('TP01', N'Hà Nội', 2, 1),
('TP02', N'Đà Nẵng', 3, 0),
('TP03', N'Hồ Chí Minh', 2, 1),
('TP04', N'Hải Phòng', 1, 0),
('TP05', N'Cần Thơ', 2, 1);

-- 6. DIEMTHAMQUAN
INSERT INTO DIEMTHAMQUAN VALUES
('DTQ01', N'Vịnh Hạ Long', 2, 200000.00),
('DTQ02', N'Phú Quốc', 3, 250000.00),
('DTQ03', N'Đà Lạt', 2, 150000.00),
('DTQ04', N'Huế', 1, 100000.00),
('DTQ05', N'Nha Trang', 2, 180000.00);

-- 7. LICHTRINH
INSERT INTO LICHTRINH VALUES
('LT01', '2025-05-10 08:00', '2025-05-10 18:00', 1, 'KS01', 'TP01', 'DTQ01', 'HD01'),
('LT02', '2025-05-11 09:00', '2025-05-11 19:00', 2, 'KS02', 'TP02', 'DTQ02', 'HD02'),
('LT03', '2025-05-12 07:00', '2025-05-12 17:00', 3, 'KS03', 'TP03', 'DTQ03', 'HD03'),
('LT04', '2025-05-13 08:30', '2025-05-13 18:30', 4, 'KS04', 'TP04', 'DTQ04', 'HD04'),
('LT05', '2025-05-14 09:00', '2025-05-14 19:00', 5, 'KS05', 'TP05', 'DTQ05', 'HD05');

-- 8. PHUONGTIEN
INSERT INTO PHUONGTIEN VALUES
('PT01', N'Xe Hơi'),
('PT02', N'Máy Bay'),
('PT03', N'Xe Lửa'),
('PT04', N'Xe Buýt'),
('PT05', N'Tàu Thủy');

-- 9. LOAIXEHOI
INSERT INTO LOAIXEHOI VALUES
('LX01', N'Xe 7 Chỗ', 7, 1, 'PT01'),
('LX02', N'Xe 16 Chỗ', 16, 1, 'PT01'),
('LX03', N'Xe 29 Chỗ', 29, 0, 'PT01'),
('LX04', N'Xe 45 Chỗ', 45, 1, 'PT01'),
('LX05', N'Xe 9 Chỗ', 9, 0, 'PT01');

-- 10. HANGVEMAYBAY
INSERT INTO HANGVEMAYBAY VALUES
('HVB01', N'Hạng Phổ Thông', 1500000.00, 750000.00, 'PT02'),
('HVB02', N'Hạng Thương Gia', 3000000.00, 1500000.00, 'PT02'),
('HVB03', N'Hạng Nhất', 5000000.00, 2500000.00, 'PT02'),
('HVB04', N'Hạng Phổ Thông Đặc Biệt', 2000000.00, 1000000.00, 'PT02'),
('HVB05', N'Hạng Thương Gia Đặc Biệt', 3500000.00, 1750000.00, 'PT02');

-- 11. HANGVEXELUA
INSERT INTO HANGVEXELUA VALUES
('HX01', N'Hạng Ngồi Mềm', 500000.00, 250000.00, 1, 'PT03'),
('HX02', N'Hạng Giường Nằm', 1000000.00, 500000.00, 1, 'PT03'),
('HX03', N'Hạng VIP', 1500000.00, 750000.00, 1, 'PT03'),
('HX04', N'Hạng Thường', 300000.00, 150000.00, 1, 'PT03'),
('HX05', N'Hạng Cao Cấp', 1200000.00, 600000.00, 1, 'PT03');
